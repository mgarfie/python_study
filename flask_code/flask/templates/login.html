<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登陆注册</title>
    <link rel="stylesheet" href="../static/../static/assets/style.css">
    <link rel="stylesheet" href="./../static/assets/iconfont.css">
</head>
<body>
    <div class='container' id='container'>
        <div class="form-container sign-up-container">
            <!-- 注册 -->
           <form action="/signup/" method="POST">
            <h1>用户注册</h1>
            <div class="social-container">
                <a href="#" class="social"><i class="iconfont icon-qq"></i></a>
                <a href="#" class="social"><i class="iconfont icon-weixin"></i></a>
                <a href="#" class="social"><i class="iconfont icon-weibo-copy"></i></a>
                <a href="#" class="social"><i class="iconfont icon-github"></i></a>
            </div>
            <span>您可以选择以上几种方式注册一个您的账户!</span>
            <input type="text" placeholder="用户名" name="name">
            <input type="password" placeholder="密码" name="password">
            <input type="password" placeholder="确认密码" name="password2">
            <input type="email" placeholder="邮箱" name="email">
            <button>注册</button>


           </form>
        </div>
        <div class="form-container sign-in-container">
            <!-- 登陆 -->
            <form action="/signin/" method="POST">
                <h1>用户登陆</h1>
            <div class="social-container">
                <a href="#" class="social"><i class="iconfont icon-qq"></i></a>
                <a href="#" class="social"><i class="iconfont icon-weixin"></i></a>
                <a href="#" class="social"><i class="iconfont icon-weibo-copy"></i></a>
                <a href="#" class="social"><i class="iconfont icon-github"></i></a>
            </div>
            <span>您可以选择以上几种方式登陆您的账户!</span>
            <input type="text" placeholder="用户名" name="input_name">
            <input type="password" placeholder="密码" name="input_password">
            <a href="#">忘记密码？</a>
            <button>登陆</button>
            </form>
        </div>
        <!-- 侧边栏内容 -->
        <div class="overlay-container">
            <div class="overlay">
                <div class="overlay-panel overlay-left">
                    <h1>已有帐号？</h1>
                    <p>亲爱的快快点我去进行登陆吧。</p>
                    <button class='ghost' id="signIn">登陆</button>
                </div>
                <div class="overlay-panel overlay-right">
                    <h1>没有帐号？</h1>
                    <p>点击注册去注册一个属于你的账号吧。</p>
                    <button class='ghost' id="signUp">注册</button>
                </div>
            </div>
        </div>
    </div>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        // 检查 URL 中的查询参数
        const urlParams = new URLSearchParams(window.location.search);
        let registered = urlParams.get('registered');
        const user_name = urlParams.get('name');
        // 如果注册成功，显示弹窗
        if (registered === 'true') {
            alert('注册成功！请登录。');
        }else {
            if (registered === 'user or email exists'){
                alert('用户已存在，请勿重复注册!!!')
                //删除register的值
                urlParams.delete('registered');
                //构造一个新的 URL，移除查询参数。
                const newUrl = window.location.origin + window.location.pathname;
                //重新加载
                window.history.replaceState({}, '', newUrl);
            }
            if (registered === 'unknown error'){
                alert('注册过程中发生错误，请重试')
                //删除register的值
                urlParams.delete('registered');
                //构造一个新的 URL，移除查询参数。
                const newUrl = window.location.origin + window.location.pathname;
                //重新加载
                window.history.replaceState({}, '', newUrl);
            }
            if (registered === 'password not match'){
                alert('两次密码不相同，请重试!!!')
                //删除register的值
                urlParams.delete('registered');
                //构造一个新的 URL，移除查询参数。
                const newUrl = window.location.origin + window.location.pathname;
                //重新加载
                window.history.replaceState({}, '', newUrl);
            }

            if (registered === 'user or password error'){
                alert('账号或密码错误，请重试!!!')
                //删除register的值
                urlParams.delete('registered');
                //构造一个新的 URL，移除查询参数。
                const newUrl = window.location.origin + window.location.pathname;
                //重新加载
                window.history.replaceState({}, '', newUrl);
            }
        }
        // 如果登陆成功，显示弹窗
        if (user_name){
            alert('登陆成功，欢迎'+user_name+'登录本网站！！')
        }

    });
</script>

</body>

<script src="../static/index.js"></script>
</html>